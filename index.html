<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <title>GridTLI GUI</title>
	<!-- load bootstrap stylesheet -->
	<link rel="stylesheet" href="http://getbootstrap.com/2.3.2/assets/css/bootstrap.css"></link>
	<!-- load custom stylesheet -->
    <link rel="stylesheet" href="style.css"></link>
	<!-- load paper.js and canvas -->
    <script type="text/javascript" src="paper-full.js"></script>
    <script type="text/paperscript" canvas="canvas">
		// Define background color for the canvas
		canvas.style.background = 'transparent';

		var path;
		var allPathsList = [];
		var pointList = [];

		var textItem = new PointText({
			content: 'Click and drag to draw a line.',
			point: new Point(20, 30),
			fillColor: 'black',
		});

		function onMouseDown(event) {
			// If we produced a path before, deselect it:
			if (path) {
				path.selected = false;
			}

			// Create a new path and set its stroke color to black:
			path = new Path({
				segments: [event.point],
				strokeColor: 'black',
				// Select the path, so we can see its segment points:
				fullySelected: true
			});
		}

		// While the user drags the mouse, points are added to the path
		// at the position of the mouse:
		function onMouseDrag(event) {
			path.add(event.point);
			// Update the content of the text item to show how many
			// segments it has:
			textItem.content = 'Segment count: ' + path.segments.length + "\n";
			// adds the x and y coords of each point to the list for the current path
			pointList.push(event.point["x"], event.point["y"]);
			textItem.content = 'Point Coords: ' + pointList + "\n";
		}

		// When the mouse is released:
		function onMouseUp(event) {
			var segmentCount = path.segments.length;
			textItem.content = segmentCount;

			// add the list of points for the segment to the list of all paths

			allPathsList.push(pointList);

			// reinitilizae the pointList
			pointList = [];

			// for testing purposes, display all paths and latest path
			numPaths = allPathsList.length;
			textItem.content = allPathsList + "\n" + allPathsList[numPaths-1] + "\n";
		}

    </script>
	<script type="text/paperscript" canvas="gridlayer">
		gridlayer.style.background = '#ccc';
		var drawGridLines = function(num_rectangles_wide, num_rectangles_tall, boundingRect) {
			var width_per_rectangle = boundingRect.width / num_rectangles_wide;
			var height_per_rectangle = boundingRect.height / num_rectangles_tall;
			for (var i = 0; i <= num_rectangles_wide; i++) {
				var xPos = boundingRect.left + i * width_per_rectangle;
				var topPoint = new paper.Point(xPos, boundingRect.top);
				var bottomPoint = new paper.Point(xPos, boundingRect.bottom);
				var aLine = new paper.Path.Line(topPoint, bottomPoint);
				aLine.strokeColor = '#999';
			}

			for (var i = 0; i <= num_rectangles_tall; i++) {
				var yPos = boundingRect.top + i * height_per_rectangle;
				var leftPoint = new paper.Point(boundingRect.left, yPos);
				var rightPoint = new paper.Point(boundingRect.right, yPos);
				var aLine = new paper.Path.Line(leftPoint, rightPoint);
				aLine.strokeColor = '#999';
			}
		}
		drawGridLines(16, 12, paper.view.bounds);
	</script>
</head>
<body>
	<div>
		<canvas id="gridlayer">
		</canvas>
		<canvas id="canvas">
		</canvas>
	</div>
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
				<div class="nav-collapse collapse">
					<ul class="nav">
						<li><a href="#">Home</a></li>
						<li><a href="#">About</a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
