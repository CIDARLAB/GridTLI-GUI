<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <title>GridTLI GUI</title>
	<!-- load script that controls grid functions -->
	<script type="text/javascript" src="gridfunctions.js"></script>
	<!-- load script that contains import and export functions --> 
	<script type="text/javascript" src="export_import.js"></script>
	<!-- load custom stylesheet -->
    <link rel="stylesheet" href="style.css"></link>
	<!-- load paper.js -->
    <script type="text/javascript" src="paper-full.js"></script>
	<!-- load script that defines the canvas -->
	<script type="text/javascript" src="canvas.js"></script>
		<script type="text/javascript"> 
<!-- 	
	     //   function addEvent(obj, event, func) {
       //     if (obj.addEventListener) {
     //           obj.addEventListener(event, func, false);
             //   return true;
           // } else if (obj.attachEvent) {
           //     obj.attachEvent('on' + event, func);
         //   } else {
        //        var f = obj['on' + event];
               // obj['on' + event] = typeof f === 'function' ? function() {
             //       f();
            //        func();
           //     } : func
          //  }
        //} -->
			function f1(args) {
					alert("f1 called");
					var the_data, hiddenElement, filename; 
					var the_json = project.exportJSON(); 
					var js_string = JSON.stringify(the_json);
					alert(js_string);
					var data = "data:text/json;charset=utf-8," + encodeURIComponent(js_string); 
					<!-- return data; -->
					
					filename = args.filename || 'data.json';
					alert(filename);
					hiddenElement = document.createElement('a');
					hiddenElement.setAttribute('href', data);
					hiddenElement.setAttribute('download', filename);
					alert(hiddenElement);
					document.body.appendChild(hiddenElement);
					hiddenElement.click(alert("clicked")); 
			//form validation that recalls the page showing with supplied inputs.    
			}
			<!-- document.getElementById("Save").addEventListener = function fun() { -->
			<!-- alert("hello"); -->
			<!-- data = f1(); -->
			<!-- $('<a href="data:' + data + '"download="data.json"></a>').appendTo('#navbar') -->
        //validation code to see State field is mandatory.  
		
		 $.getJSON('/path/to/your/file.json', function (data) {
        project.importJSON(data);
		});
  
	</script> 	
</head>
<body>
	<div id="navbar" class="navbar">
		<a href="#">Home</a>
		<a href="#">About</a>
		<a href="STL_Text_editor/ace-builds-master/editor.html"> Editor </a>
	</div>
	<div id="tab">
		<article id="drawingGrid">
			<canvas id="myCanvas"></canvas>
			<p class="rotate" id="label">Y Label</p>
		</article>
		<div id="threshold">
			<h3>Graph Values</h3>
			<article class="spatial">
				<article class="graphLabels">
					<p>Spatial:</p>
				</article>
				<article class="graphValues">
					<input type="text" id="smin" value="X_min"
						onblur="if (this.value == '') {this.value = 'X_min';}"
						onfocus="if (this.value == 'X_min') {this.value = '';}" />
					<br>
					<input type="text" id="smax" value="X_max"
						onblur="if (this.value == '') {this.value = 'X_max';}"
						onfocus="if (this.value == 'X_max') {this.value = '';}" />
				</article>
			</article>
			<article class="temporal">
				<article class="graphLabels">
					<p>Temporal:</p>
				</article>
				<article class="graphValues">
					<input type="text" id="tmax" value="Y_max"
						onblur="if (this.value == '') {this.value = 'Y_max';}"
						onfocus="if (this.value == 'Y_max') {this.value = '';}" />
				</article>
			</article>
			<h3 class="thresh">Threshold Values</h3>
			<article class="spatial">
				<article class="threshLabels">
					<p>Spatial:</p>
				</article>
				<article class="threshValues">
					<input type="text" id="sThresh" value="Xt"
						onblur="if (this.value == '') {this.value = 'Xt';}"
						onfocus="if (this.value == 'Xt') {this.value = '';}" />
				</article>
			</article>
			<article class="temporal">
				<article class="threshLabels">
					<p>Temporal:</p>
				</article>
				<article class="threshValues">
					<input type="text" id="tThresh" value="Yt"
						onblur="if (this.value == '') {this.value = 'Yt';}"
						onfocus="if (this.value == 'Yt') {this.value = '';}" />
				</article>
			</article>
			<article class="cluster">
				<article class="threshLabels">
					<p>Cluster:</p>
				</article>
				<article class="threshValues">
					<input type="text" id="cluster" value="Ct"
						onblur="if (this.value == '') {this.value = 'Ct';}"
						onfocus="if (this.value == 'Ct') {this.value = '';}" />
				</article>
			</article>
			<button type="button" id="changeVals" onClick="changeValues()">Run</button>
		</div>
	</div>
	<!--this section helps me check the javascript function that "run" gathers the values-->
	<br><br>
	<br><br>
	<br><br>
	<br>
	<input type="text" id="xtmin" value="1"><br>
	<input type="text" id="xtmax" value="1"><br>
	<input type="text" id="ytmax" value="1"><br>
	<input type="text" id="ct" value="1"><br>
	<input id="xrange" value="1" style="width: 300px"><br>
	<input id="yrange" value="1" style="width: 300px"><br>
	<!-- tool buttons -->
	<label>
		<input type="radio" name="tool" class="btn" value="select">
		<img src="icon-mouse.png" id="select" onClick="selectLine.activate()">
	</label>
	<label>
		<input type="radio" name="tool" class="btn" value="pencil" checked>
		<img src="icon-pencil.png" id="pencil" onClick="drawLine.activate()">
	</label>	

	<label>
		<input type="radio" name="tool" class="btn" value="segment">
		<img src="icon-segment.png" id="dot" onClick="drawPoints.activate()">
	</label>

	<label>
		<input type="radio" name="tool" class="btn" value="eraser">
		<img src="icon-eraser.png" id="eraser" onClick="deleteLines.activate()">
	</label>
	<label>
		<input type="radio" name="tool" class="btn" value="move">
		<img src="icon-move.png" id="move" onClick="movePoints.activate()">
	</label>
	<label>
		<input type="radio" name="the_save" class="btn" value="save"> 
		<img src="save.png" id="save" onClick='f1({ filename: "whoo.json" });'>
	</label> 
	<label> 
		<input type="file" id="fileinput" onchange="startRead()"/> 
		<img src="icon-upload.png" id="upload"> 
		<script type="text/javascript" > 
document.getElementById('fileinput').addEventListener('change', function(){
	alert("did the listener work");
    var file = this.files[0];
	alert(file.name);
    // This code is only for demo ...
<!-- 	$.getJSON(file.name, functon(json) { 
		//alert(json);
		//}); -->
	project.importJSON(file);
    console.log("name : " + file.name);
    console.log("size : " + file.size);
    console.log("type : " + file.type);
    console.log("date : " + file.lastModified);
}, false);
	</script> 
	</label>
</body>
</html>
